# 기능
북마크 관리 Chrome Extension의 AppHeader 영역. 메인 페이지 영역의 contents display를 제어한다.

# Design Pattern
- **Store Pattern (Pinia)**: `DisplayMode` 상태를 Pinia Store로 이동하여 전역 관리.
- **Component Composition**: ToolBar, UserProfile, Settings 조합.
- **Mediator Pattern**: Toolbar, Account/Profile, Settings 등 헤더 내 하위 모듈의 이벤트를 수집해 상위(App)로 전달.

# Input / Output

## Input
Props {
    initialMode: "explore" | "pending" = "explore",
    toolbarSuggestions: {
        search: list[string],
        talk: list[string]
    },
    userId: string | null,
    userNickname: string,
    userAvatar: string,
    onModeChange: (mode: "explore" | "pending") => void,
    onToolbarSubmit: (output: ToolbarOutput) => void
}

## State (Pinia Store로 관리)
State {
    currentMode: "explore" | "pending",
    swapTo: "pending" | "explore",  // currentMode의 반대값
    locale: string,
    overlay: null | "account" | "settings"
}

## Output
Output {
    display_mode: {
        currentMode: "explore" | "pending",
        overlay: null | "account" | "settings"
    },
    toolbar_output: {
        toolbar_operation: "search" | "talk",
        toolbar_input: string,
        suggestions_used: list[string]
    }
}

# Pseudo code
import ToolBar.vue      // output: {toolbar_operation: "search" or "talk", toolbar_input: str}
import color_template.css
import config
import i18n
import { PhUserCircle, PhGearFine } from '@phosphor-icons/vue'
import { useAppStore } from '@/stores/app'

config = ~      // 적절한 라이브러리로 관리
appStore = useAppStore()

// 초기화
appStore.currentMode = Props.initialMode
appStore.swapTo = Props.initialMode == "explore" ? "pending" : "explore"
appStore.locale = config.locale
appStore.overlay = null

// 모드 전환 함수
function swap_mode() {
    temp = appStore.currentMode
    appStore.currentMode = appStore.swapTo
    appStore.swapTo = temp
    Props.onModeChange(appStore.currentMode)
}

// Toolbar 출력 핸들러
function handle_toolbar_submit(toolbar_output) {
    Props.onToolbarSubmit(toolbar_output)
}

VerticalGrid(
    HorizontalGrid(
        Image("@/components/assets/logo.svg"),  // 실제 로고 이미지 사용
        IconButton(
            PhUserCircle(size: 24, weight: "bold"),
            onPress: () => account_menu_display()
        ),
        IconButton(
            PhGearFine(size: 24, weight: "bold"),
            onPress: () => settings_menu_display()
        ),
        BoxButton(
            contains: Text(i18n[appStore.swapTo]),  // "탐색하기" or "보관된 탭"
            border: color_template.grey-lv2,
            rounded: 4,
            onPress: () => swap_mode(),
        ),
    ),
    ToolBar(
        suggestions: Props.toolbarSuggestions,
        onSubmit: (output) => handle_toolbar_submit(output)
    ),
    HorizontalLine(color: color_template.main, width: 4px)
)

# Display pages

function account_menu_display(){
    // UserProfile은 App.vue의 main-content 영역에 전체 화면으로 표시됨
    appStore.overlayMode = "account"
}

function settings_menu_display(){
    // Settings는 App.vue의 main-content 영역에 전체 화면으로 표시됨
    appStore.overlayMode = "settings"
}

// 화면 구현은 `explore-plane`, `pending-plane` 디렉토리에서 별도 모듈로 구현될 것임. `AppHeader`는 제어를 위한 것.
// UserProfile과 Settings는 App.vue에서 직접 렌더링됨 (오버레이가 아닌 main display 영역에)
}